# kmeans — Rodinia Benchmark (Baseline & PIM Variants)

## Benchmark Source

Rodinia Benchmark Suite 3.1  
===========================

Contact (for original code):  
Ke Wang: kw5na@virginia.edu  
Shuai Che: sc5nf@cs.virginia.edu  
Kevin Skadron: skadron@cs.virginia.edu

Rodinia wiki:  
http://lava.cs.virginia.edu/wiki/rodinia

---

## Build

Run:

```bash
make
```

This produces two executables:

- `kmeans_baseline.exe` — baseline code  
- `kmeans_pim.exe` — modified PIM code

> Tip: You can override the compiler if needed, e.g.:
> ```bash
> make CC=gcc-15
> ```

---

## Generate Input (pre-run)

Before running the benchmark, **generate the input dataset** using `datagen.cpp`.

1. **Compile the generator**:
   ```bash
   g++ datagen.cpp -o datagen.exe -O3
   ```

2. **Run the generator** (arguments: `<num_objects> <num_features>`).  
   Example: generate 10,000 objects each with 16,384 integer features:
   ```bash
   ./datagen.exe 10000 16384
   ```

   This produces a text file named:
   ```
   10000_16384.txt
   ```

> Note: The generated file is **text** format. Use the `-b` flag with kmeans **only** if you provide a binary-format file.

---

## Usage

```
kmeans.exe -i filename
    -i filename            : file containing data to be clustered
    -b                     : input file is in binary format
    -k                     : number of clusters (default is 5)
    -t threshold           : threshold value
    -n no. of threads      : number of threads
```

### Examples

```bash
./kmeans_baseline.exe -n 8 -i 10000_16384.txt
./kmeans_pim.exe      -n 8 -i 10000_16384.txt
```

---

## PIM Output

The PIM variant (`kmeans_pim.exe`) generates:

- **`bbop_statistics.csv`** — execution time and energy consumption for each PIM system (bbop instruction), i.e., **SIMDRAM** and **Proteus**.
